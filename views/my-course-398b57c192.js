"use strict";function getCourseInfo(o){return new Promise(function(t,e){var n="/api/white_board/appointment/student/preorder/"+o+"/info/";$.ajax({type:"GET",url:n,data:null,dataType:"json",success:function(n){if(0!=n.meta.status)return e(new Error(n.meta.msg));t(n.data)},error:function(n){e(n)}})})}

var pageRender=function(){function t(n,t){n=n||0,t=t||"";var e=Util.queryUrl(window.location.href,"playback_version")||"",o={platform:"ws",category:n,last_item_id:t,playback_version:e};return 


new Promise(function(t,e){$.get("/api/white_board/appointment/student/preorders/",o).then(function(n){0!==n.meta.status&&e(new Error(n.meta.msg)),t(n.data)})})}

return{waiting:(r="",i=!1,s=[],function(n){return(n=void 0!==n&&n)&&(r="",i=!1,s.length=0),i?(console.log("is last page"),Promise.resolve()):t(1,r).then(function(n){return 0===n.records.length?i=!0:r=n.records.slice(-1)[0].items.slice(-1)[0].id,renderList(1,s=s.concat(n.records))})}),finished:(e="",o=!1,a=[],function(n){return(n=void 0!==n&&n)&&(e="",o=!1,a.length=0),o?(console.log("is last page"),Promise.resolve()):t(2,e).then(function(n){return 0===n.records.length?o=!0:e=n.records.slice(-1)[0].items.slice(-1)[0].id,renderList(2,a=a.concat(n.records))})})};


var e,o,a,r,i,s}();function renderList(t,o){return Promise.resolve().then(function(){if(1===t){var n=$("#my-course .panel-waiting .data-table tbody"),e="";console.log(o),o.forEach(function(t){t.items.forEach(function(n){e+='\n                         <tr data-course-id="'+n.id+'">\n                            <td>\n                                <p class="date">'+t.date_day+'</p>\n                                <p class="time">'+Util.encodeHTML(n.time_range)+'</p>\n                                <div class="teacher">\n                                    <span class="avatar"><img src="'+n.photo_url+'" alt=""/></span>\n                                    <em class="name">'+Util.subByte(n.teacher_name,16,"...")+'</em>\n                                </div>\n                            </td>\n                            <td>\n                                <h4 class="title'+("ADAPTIVE"==n.courseware_category?" adaptive":"")+'">'+n.name+'</h4>\n                                <div class="description">\n                                    <p>'+n.content+"</p>\n                                </div>\n                            </td>\n                            <td>\n                                "+(0===n.status?'<a class="btn btn-goto-course disabled" href="javascript:void(0)">未开始</a>':'<a class="btn btn-goto-course" href="javascript:void(0)">进入课堂</a>')+"\n                            </td>\n                        </tr>\n                    "})}),e||(e='\n                        <tr>\n                            <td style="padding:30px;border:0 none;color:#909090;text-align: center;" colspan="3">暂无数据~</td>\n                        </tr>\n                    '),n.html(e)}}).then(function(){if(2===t){var n=$("#my-course .panel-finished .data-table tbody"),e="";o.forEach(function(t){t.items.forEach(function(n){e+='\n                         <tr data-course-id="'+n.id+'" data-tutor-record-id="'+n.tutor_record_id+'">\n                            <td>\n                                <p class="date">'+t.date_day+'</p>\n                                <p class="time">'+Util.encodeHTML(n.time_range)+'</p>\n                                <div class="teacher">\n                                    <span class="avatar"><img src="'+n.photo_url+'" alt=""/></span>\n                                    <em class="name">'+n.teacher_name+'</em>\n                                </div>\n                            </td>\n                            <td>\n                                <h4 class="title">'+n.name+' </h4>\n                                <div class="description">\n                                    <p>'+n.content+"</p>\n                                </div>\n                            </td>\n                            <td>\n                            \x3c!-- "+(0===n.student_commented&&'<a class="btn btn-comment" href="javascript:void(0)">评价</a>')+" --\x3e\n                                "+(1===n.show_playback?'<a class="btn btn-playback" href="javascript:void(0)">回放</a>':'<a class="btn disabled btn-playback" href="javascript:void(0)">回放</a>')+"\n                            </td>\n                        </tr>\n                    "})}),e||(e='\n                        <tr>\n                            <td style="padding:30px;border:0 none;color:#909090;text-align: center;" colspan="2">暂无数据~</td>\n                        </tr>\n                    '),n.html(e)}})}function bindEvents(){var t=["waiting","finished"],c=t[0];return Promise.resolve().then(function(){tabBox($("#my-course .tab-triggers li"),$("#my-course .tab-panel"),function(n){console.log(n),c=t[n],$("#layout-bd").scrollTop(0)})}).then(function(){$("#my-course .panel-waiting").on("click",".btn-goto-course",function(){var n=$(this);if(!n.hasClass("disabled")){var o=n.closest("tr").attr("data-course-id");getCourseInfo(o).then(function(n){if(1!==n.status)window.location.reload();else{var t={course_id:o},e="client://open_1v1course?param="+encodeURIComponent(JSON.stringify(t));window.location.href=e}}).catch(function(){alert("网络异常，请稍后再试")})}})}).


then(function(){$("#my-course .panel-finished").on("click",".btn-playback",);


console.log(o.target_url),console.log(a),w









































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































=a}})})
.then(function(){var o=$("#layout-bd"),a=o.height(),r=$("#my-course .panel-waiting"),i=$("#my-course .panel-finished"),s={};o.on({scroll:function(){if(!s[c]){var n;"waiting"===c?n=r:"finished"===c&&(n=i);var t=o.scrollTop(),e=n.height();t+a+100<e||(s[c]=!0,console.log("load next page"),"waiting"==c?pageRender.waiting().finally(function(){s[c]=!1}):"finished"==c&&pageRender.finished().finally(function(){s[c]=!1}))}}})}).then(function(){$("#to-browser .to-student-center").on({click:function(){var n=window.location.origin,t={url:n+"/web/student/center/180330/course/unfinished-course.html",url_tool:n+"/web/download/180425/chrome-download.html",chrome_only:1},e="aftstudent://open-browser?param="+encodeURIComponent(JSON.stringify(t));window.location.href=e}})})}bindEvents(),$("#layout-bd").show(),pageRender.waiting(!0),pageRender.finished(!0);